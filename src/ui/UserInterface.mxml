<?xml version="1.0"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:ui="ui.*"
         width="100%"
         height="100%"
         creationComplete="onCreationComplete(event)">

    <fx:Script>
            <![CDATA[
        import global.Color;

        import mx.collections.ArrayCollection;
        import mx.events.FlexEvent;

        private function onCreationComplete(event:FlexEvent):void {
        }

        public function addLayers(layers:Array):void {
            layersList.dataProvider = new ArrayCollection(layers);
        }

        public function updateSeed(seed:int):void {
            seedLabel.text = String(seed);
        }

        public function updateLayer(item:*):void {
            layersList.dataProvider.itemUpdated(item);
        }

        public function updateStatus(str:String):void {
            if (str == "Working...") {
                newMapButton.label = "Working...";
                return;
            } else {
                newMapButton.label = "Generate new map";
            }

            statusLabel.text = str;
        }

        private function onNewMapButtonClicked(event:MouseEvent):void {
            dispatchEvent(new Event(UIEventType.MAKE_MAP));
        }
        ]]>
    </fx:Script>
    <s:Group width="100%">

        <s:VGroup width="100%"
                  height="100%">
            <s:Rect width="100%"
                    height="100%"
                    radiusX="5"
                    radiusY="5">
                <s:fill>
                    <s:SolidColor color="{Color.background}" />
                </s:fill>
            </s:Rect>
        </s:VGroup>

        <s:VGroup width="100%"
                  height="100%"
                  gap="6"
                  padding="15">

            <s:HGroup width="100%"
                      verticalAlign="middle">
                <s:Button id="newMapButton"
                          skinClass="skins.buttons.PrimaryButtonSkin"
                          label="Generate new map"
                          click="onNewMapButtonClicked(event)" />
                <s:Spacer width="10" />
                <s:Label text="Seed: " />
                <s:Label id="seedLabel" />
                <ui:VerticalDivider />
                <s:Label id="statusLabel" />
            </s:HGroup>

            <s:List id="layersList"
                    width="100%"
                    direction="ltr"
                    itemRenderer="ui.renderers.LayersListItemRenderer"
                    horizontalScrollPolicy="auto"
                    verticalScrollPolicy="off"
                    borderVisible="false"
                    contentBackgroundAlpha="0">
                <s:layout>
                    <s:HorizontalLayout />
                </s:layout>
            </s:List>

        </s:VGroup>

    </s:Group>
</s:Group>
